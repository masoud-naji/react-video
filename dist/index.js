"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function l(e){for(var t="",n=e.split(/\n/);n.length>3;){for(var l=3;l<n.length;l++)n[2]+="\n"+n[l];n.splice(3,n.length-3)}var r=0;if(!n[0].match(/\d+:\d+:\d+/)&&n[1].match(/\d+:\d+:\d+/)&&(t+=n[0].match(/\w+/)+"\n",r+=1),!n[r].match(/\d+:\d+:\d+/))return"";var a=n[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/);return a?(t+=a[1]+":"+a[2]+":"+a[3]+"."+a[4]+" --\x3e "+a[5]+":"+a[6]+":"+a[7]+"."+a[8]+"\n",n[r+=1]&&(t+=n[r]+"\n\n"),t):""}function r(e){for(var t="",n=e.split(/\n/);n.length>3;){for(var l=3;l<n.length;l++)n[2]+="\n"+n[l];n.splice(3,n.length-3)}var r=0;if(!n[r].match(/\d+:\d+.\d+,\d+:\d+.\d+/))return"";var a=n[0].match(/(\d+:\d+:\d+.\d+),(\d+:\d+:\d+.\d+)/);return a?(t+=a[1]+" --\x3e "+a[2]+"\n",n[r+=1]&&(t+=n[r]+"\n\n"),t):""}const a=({videopath:t,autoplay:a,captionurl:c,embedurl:d,loop:o,muted:s,playPause:i,type:u,control:p})=>{const f=e.useRef(null),[h,m]=e.useState(!0);return console.log(c),e.useEffect((()=>{const e=f.current;if(e){if(e.addEventListener("play",(()=>{m(!1)})),e.addEventListener("pause",(()=>{m(!0)})),c&&c.toLowerCase().endsWith(".srt"))fetch(c).then((e=>e.text())).then((t=>{const n=function(e){var t=e.replace(/\r+/g,""),n=(t=t.replace(/^\s+|\s+$/g,"")).split("\n\n"),r="";if(n.length>0){r+="WEBVTT\n\n";for(var a=0;a<n.length;a++)r+=l(n[a])}return r}(t),r=new Blob([n],{type:"text/vtt"}),a=URL.createObjectURL(r);console.log("from srt",a);const c=document.createElement("track");c.kind="subtitles",c.label="English",c.srclang="en",c.src=a,e.appendChild(c)}));else if(c&&c.toLowerCase().endsWith(".sbv"))fetch(c).then((e=>e.text())).then((t=>{const n=function(e){var t=e.replace(/\r+/g,""),n=(t=t.replace(/^\s+|\s+$/g,"")).split("\n\n"),l="";if(n.length>0){l+="WEBVTT\n\n";for(var a=0;a<n.length;a++)l+=a+1+"\n",l+=r(n[a])}return l}(t),l=new Blob([n],{type:"text/vtt"}),a=URL.createObjectURL(l);console.log(a);const c=document.createElement("track");c.kind="subtitles",c.label="English",c.srclang="en",c.src=a,e.appendChild(c)}));else if(c&&c.toLowerCase().endsWith(".vtt")){const t=document.createElement("track");t.kind="subtitles",t.label="English",t.srclang="en",t.src=c,e.appendChild(t)}a&&e.play()}}),[t,a,c]),n.default.createElement("div",null,"Video Player here",n.default.createElement("br",null),u,"videoPath"===u?n.default.createElement("div",null,n.default.createElement("video",{ref:f,className:"video-js vjs-default-skin",style:{width:"100%",height:"100%"},controls:p,loop:o,muted:s,playsInline:!0,autoPlay:a,disablePictureInPicture:!0},n.default.createElement("source",{src:t,type:"video/mp4"}),n.default.createElement("source",{src:t,type:"video/webm"}),n.default.createElement("source",{src:t,type:"video/ogg"})),a&&o&&i&&!p&&n.default.createElement("div",{className:"cmp-video__autoplay-control"},n.default.createElement("button",{onClick:()=>h?f.current.play():f.current.pause(),className:`icon icon--${a?"pause":"play"}-button-white autoplay-control`,"aria-label":"click to pause video"}))):"thirdPartyEmbed"===u?n.default.createElement("div",{dangerouslySetInnerHTML:{__html:d}}):null,"End of video player")};exports.ReactVideoPlayer=e=>n.default.createElement(a,e);
